# KANJI.FNT

## Description

Contains the game's dialogue font. Characters are stored as 16x16 tiles in 1bpp; while the game displays font characters with a black outline, that outline appears to be generated by the game and isn't stored in the font.

The font has a full set of hiragana and katakana and a large number of kanji, some special characters like a star and a heart, and a full uppercase English character set.

### Header

The header begins with two bytes indicating the starting position of the tile content, e.g. 0C48. The rest of the header contains a full list of all the Shift JIS codepoints contained in the kanji font. Their indices are used as a lookup table; e.g., index 1 (8141) is tile 1 (、).

The Shift JIS codepoints are sequential, but not complete. This isn't a comprehensive Shift JIS font, and codepoints are skipped in various places.

The first codepoint in the header, unlike the rest, represents a codepoint within the ASCII region - e.g., one that's a single byte. The first 16x16 tile is blank; ASCII codepoint 0x20 is space. This codepoint is specified as "2020". However, the game seems to hardcode reading two-byte codepoints; it won't interpret single-byte codepoints, and trying to double up like with "2020" doesn't work; if a codepoint is specified as "4141" in the map, then the text parser will try to read "4141" as a single character even though this would be two characters in Shift JIS. No luck trying to get the game to read ASCII that way.

### Unused codepoints

Four tiles, near the beginning of the file, look to be unused. While the tiles themselves are finished, the header maps them all to 81AC - "〓", or the [geta kigo](https://en.wikipedia.org/wiki/List_of_Japanese_typographic_symbols), a proofreader's mark which indicates that a glyph is unavailable. The four unmapped glyphs are:

* ‼
* ⁉
* t
* ➤

The first, second, and fourth characters don't exist in the Shift JIS character set.

### Mismatched codepoints

The character "‥", which follows "〜" (nyoro), is mapped to 8163. 8163 is the codepoint for the three-dot leader, used as an ellipsis; 8164 would be the codepoint for the two-dot leader. It's possible it was mapped to 8163 because it's used as an ellipsis, even though it only contains two dots.

## TODO

The font begins at 0x0C48 into the file and runs until 0xD0A8. I haven't yet determined what the data which follows the font is.
